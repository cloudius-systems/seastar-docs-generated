<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Seastar: seastar::experimental::fsnotifier Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Seastar
   </div>
   <div id="projectbrief">High performance C++ framework for concurrent servers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceseastar.html">seastar</a></li><li class="navelem"><b>experimental</b></li><li class="navelem"><a class="el" href="classseastar_1_1experimental_1_1fsnotifier.html">fsnotifier</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classseastar_1_1experimental_1_1fsnotifier-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">seastar::experimental::fsnotifier Class Reference<div class="ingroups"><a class="el" href="group__fsnotifier.html">FileSystem Notifier</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Filesystem modification notifier. </p>
<p>This is a thin wrapper around inotify(see <a href="http://man7.org/linux/man-pages/man7/inotify.7.html">http://man7.org/linux/man-pages/man7/inotify.7.html</a>), which is the de-facto light-weight filesystem modification watch interface in Linux and can be used to log filesystem activities, reload configurations, etc.</p>
<p>The wrapper provides a buffered read of events, and RAII handling of watches themselves.</p>
<dl class="section note"><dt>Note</dt><dd>Note that this is an experimental feature, and thus any tweaks that are backward incompatible can be made before finally freezing it. Besides, the impl currently does not (yet) handle re-writing watches. </dd></dl>
</div>
<p><code>#include &lt;<a class="el" href="fsnotify_8hh_source.html">seastar/core/fsnotify.hh</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:structseastar_1_1experimental_1_1fsnotifier_1_1event"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classseastar_1_1experimental_1_1fsnotifier.html#structseastar_1_1experimental_1_1fsnotifier_1_1event">event</a></td></tr>
<tr class="memdesc:structseastar_1_1experimental_1_1fsnotifier_1_1event"><td class="mdescLeft">&#160;</td><td class="mdescRight">A wrapper around inotify_event.  <a href="classseastar_1_1experimental_1_1fsnotifier.html#structseastar_1_1experimental_1_1fsnotifier_1_1event">More...</a><br /></td></tr>
<tr class="separator:structseastar_1_1experimental_1_1fsnotifier_1_1event"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classseastar_1_1experimental_1_1fsnotifier_1_1watch.html">watch</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Simple RAII wrapper around a <a class="el" href="classseastar_1_1experimental_1_1fsnotifier.html#a11d0e044c2b38fdd5b3f446dc0f7a8c1">fsnotifier::watch_token</a>.  <a href="classseastar_1_1experimental_1_1fsnotifier_1_1watch.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a7803e30e6a6871710ded6a5d8b201d2e"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classseastar_1_1experimental_1_1fsnotifier.html#a7803e30e6a6871710ded6a5d8b201d2e">flags</a> : uint32_t { <br />
&#160;&#160;<b>access</b> = IN_ACCESS
, <b>attrib</b> = IN_ATTRIB
, <b>close_write</b> = IN_CLOSE_WRITE
, <b>close_nowrite</b> = IN_CLOSE_NOWRITE
, <br />
&#160;&#160;<b>create_child</b> = IN_CREATE
, <b>delete_child</b> = IN_DELETE
, <b>delete_self</b> = IN_DELETE_SELF
, <b>modify</b> = IN_MODIFY
, <br />
&#160;&#160;<b>move_self</b> = IN_MOVE_SELF
, <b>move_from</b> = IN_MOVED_FROM
, <b>move_to</b> = IN_MOVED_TO
, <b>open</b> = IN_OPEN
, <br />
&#160;&#160;<b>close</b> = IN_CLOSE
, <b>move</b> = IN_MOVE
, <b>oneshot</b> = IN_ONESHOT
, <b>ignored</b> = IN_IGNORED
, <br />
&#160;&#160;<b>onlydir</b> = IN_ONLYDIR
<br />
 }</td></tr>
<tr class="memdesc:a7803e30e6a6871710ded6a5d8b201d2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flags of events supported by <a class="el" href="group__fsnotifier.html">FileSystem Notifier</a>.  <a href="classseastar_1_1experimental_1_1fsnotifier.html#a7803e30e6a6871710ded6a5d8b201d2e">More...</a><br /></td></tr>
<tr class="separator:a7803e30e6a6871710ded6a5d8b201d2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11d0e044c2b38fdd5b3f446dc0f7a8c1"><td class="memItemLeft" align="right" valign="top"><a id="a11d0e044c2b38fdd5b3f446dc0f7a8c1"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classseastar_1_1experimental_1_1fsnotifier.html#a11d0e044c2b38fdd5b3f446dc0f7a8c1">watch_token</a> = int32_t</td></tr>
<tr class="memdesc:a11d0e044c2b38fdd5b3f446dc0f7a8c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Token of a watch point. <br /></td></tr>
<tr class="separator:a11d0e044c2b38fdd5b3f446dc0f7a8c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26687fd5c861953afc2a639bfa1ef459"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classseastar_1_1experimental_1_1fsnotifier.html#a26687fd5c861953afc2a639bfa1ef459">sequence_no</a> = uint32_t</td></tr>
<tr class="memdesc:a26687fd5c861953afc2a639bfa1ef459"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unique sequence number of associating related events.  <a href="classseastar_1_1experimental_1_1fsnotifier.html#a26687fd5c861953afc2a639bfa1ef459">More...</a><br /></td></tr>
<tr class="separator:a26687fd5c861953afc2a639bfa1ef459"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1ea7e18f75af62ed0c27cc271ebc1682"><td class="memItemLeft" align="right" valign="top"><a id="a1ea7e18f75af62ed0c27cc271ebc1682"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>fsnotifier</b> (<a class="el" href="classseastar_1_1experimental_1_1fsnotifier.html">fsnotifier</a> &amp;&amp;)</td></tr>
<tr class="separator:a1ea7e18f75af62ed0c27cc271ebc1682"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe7b3a29ba7b5a1cff22b3be79b2afcc"><td class="memItemLeft" align="right" valign="top"><a id="abe7b3a29ba7b5a1cff22b3be79b2afcc"></a>
<a class="el" href="classseastar_1_1experimental_1_1fsnotifier.html">fsnotifier</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (<a class="el" href="classseastar_1_1experimental_1_1fsnotifier.html">fsnotifier</a> &amp;&amp;)</td></tr>
<tr class="separator:abe7b3a29ba7b5a1cff22b3be79b2afcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37da618cbbb572050cb9d355aa9b2cce"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classseastar_1_1future.html">future</a>&lt; <a class="el" href="classseastar_1_1experimental_1_1fsnotifier_1_1watch.html">watch</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classseastar_1_1experimental_1_1fsnotifier.html#a37da618cbbb572050cb9d355aa9b2cce">create_watch</a> (const sstring &amp;path, <a class="el" href="classseastar_1_1experimental_1_1fsnotifier.html#a7803e30e6a6871710ded6a5d8b201d2e">flags</a> mask)</td></tr>
<tr class="memdesc:a37da618cbbb572050cb9d355aa9b2cce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Monitor events specified in mask for the give path.  <a href="classseastar_1_1experimental_1_1fsnotifier.html#a37da618cbbb572050cb9d355aa9b2cce">More...</a><br /></td></tr>
<tr class="separator:a37da618cbbb572050cb9d355aa9b2cce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a581d424f78eef5439333c9a60cd0a7c5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classseastar_1_1future.html">future</a>&lt; std::vector&lt; <a class="el" href="classseastar_1_1experimental_1_1fsnotifier.html#structseastar_1_1experimental_1_1fsnotifier_1_1event">event</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classseastar_1_1experimental_1_1fsnotifier.html#a581d424f78eef5439333c9a60cd0a7c5">wait</a> () const</td></tr>
<tr class="separator:a581d424f78eef5439333c9a60cd0a7c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a3d0319a645029cc052dea0d4f2589a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classseastar_1_1experimental_1_1fsnotifier.html#a9a3d0319a645029cc052dea0d4f2589a">shutdown</a> ()</td></tr>
<tr class="separator:a9a3d0319a645029cc052dea0d4f2589a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a115ba326b546e491ce4ef82479ebb1d1"><td class="memItemLeft" align="right" valign="top"><a id="a115ba326b546e491ce4ef82479ebb1d1"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classseastar_1_1experimental_1_1fsnotifier.html#a115ba326b546e491ce4ef82479ebb1d1">active</a> () const</td></tr>
<tr class="memdesc:a115ba326b546e491ce4ef82479ebb1d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the notifier is activated. <br /></td></tr>
<tr class="separator:a115ba326b546e491ce4ef82479ebb1d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6b80eb4dd6191c21995ae07e65c059a"><td class="memItemLeft" align="right" valign="top"><a id="aa6b80eb4dd6191c21995ae07e65c059a"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classseastar_1_1experimental_1_1fsnotifier.html#aa6b80eb4dd6191c21995ae07e65c059a">operator bool</a> () const</td></tr>
<tr class="memdesc:aa6b80eb4dd6191c21995ae07e65c059a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Equivalent to <a class="el" href="classseastar_1_1experimental_1_1fsnotifier.html#a115ba326b546e491ce4ef82479ebb1d1">active()</a>. <br /></td></tr>
<tr class="separator:aa6b80eb4dd6191c21995ae07e65c059a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<hr/><h2 class="groupheader">Class Documentation</h2>
<a name="structseastar_1_1experimental_1_1fsnotifier_1_1event" id="structseastar_1_1experimental_1_1fsnotifier_1_1event"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structseastar_1_1experimental_1_1fsnotifier_1_1event">&#9670;&nbsp;</a></span>seastar::experimental::fsnotifier::event</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct seastar::experimental::fsnotifier::event</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="3">Class Members</th></tr>
<tr><td class="fieldtype">
<a id="a9e022995959301beb710101e5774789e"></a><a class="el" href="classseastar_1_1experimental_1_1fsnotifier.html#a11d0e044c2b38fdd5b3f446dc0f7a8c1">watch_token</a></td>
<td class="fieldname">
id</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a949a16d850bd55c8ff82419008733abd"></a><a class="el" href="classseastar_1_1experimental_1_1fsnotifier.html#a7803e30e6a6871710ded6a5d8b201d2e">flags</a></td>
<td class="fieldname">
mask</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a6cd487c973e8a9e1b0bff2d45078bfee"></a>sstring</td>
<td class="fieldname">
name</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="af10b631bbc6a330207e67d686158bce1"></a><a class="el" href="classseastar_1_1experimental_1_1fsnotifier.html#a26687fd5c861953afc2a639bfa1ef459">sequence_no</a></td>
<td class="fieldname">
seq</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a26687fd5c861953afc2a639bfa1ef459"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26687fd5c861953afc2a639bfa1ef459">&#9670;&nbsp;</a></span>sequence_no</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classseastar_1_1experimental_1_1fsnotifier.html#a26687fd5c861953afc2a639bfa1ef459">seastar::experimental::fsnotifier::sequence_no</a> =  uint32_t</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unique sequence number of associating related events. </p>
<dl class="section note"><dt>Note</dt><dd>The sequence number is used to connect related events. Currently, it is used only for the rename events(i.e., move_from and move_to), and is 0 for other types. </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="a7803e30e6a6871710ded6a5d8b201d2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7803e30e6a6871710ded6a5d8b201d2e">&#9670;&nbsp;</a></span>flags</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classseastar_1_1experimental_1_1fsnotifier.html#a7803e30e6a6871710ded6a5d8b201d2e">seastar::experimental::fsnotifier::flags</a> : uint32_t</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Flags of events supported by <a class="el" href="group__fsnotifier.html">FileSystem Notifier</a>. </p>
<dl class="section note"><dt>Note</dt><dd>Note that the flags are bit-matched with inotify and they can be calculated using the bitwise AND and bitwise OR operators (including the assignment form) directly to take intersection or union. </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a37da618cbbb572050cb9d355aa9b2cce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37da618cbbb572050cb9d355aa9b2cce">&#9670;&nbsp;</a></span>create_watch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classseastar_1_1future.html">future</a>&lt;<a class="el" href="classseastar_1_1experimental_1_1fsnotifier_1_1watch.html">watch</a>&gt; seastar::experimental::fsnotifier::create_watch </td>
          <td>(</td>
          <td class="paramtype">const sstring &amp;&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classseastar_1_1experimental_1_1fsnotifier.html#a7803e30e6a6871710ded6a5d8b201d2e">flags</a>&#160;</td>
          <td class="paramname"><em>mask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Monitor events specified in mask for the give path. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>path of the file or directory to monitor for. </td></tr>
    <tr><td class="paramname">mask</td><td>events of interest. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a future that becomes ready when the underlying inotify_add_watch(2) call completes. </dd></dl>

</div>
</div>
<a id="a9a3d0319a645029cc052dea0d4f2589a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a3d0319a645029cc052dea0d4f2589a">&#9670;&nbsp;</a></span>shutdown()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void seastar::experimental::fsnotifier::shutdown </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Shutdown the notifier and abort any waiting events.</p>
<dl class="section note"><dt>Note</dt><dd>After shutdown, all watches are invalidated, and no new ones can be created. </dd></dl>

</div>
</div>
<a id="a581d424f78eef5439333c9a60cd0a7c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a581d424f78eef5439333c9a60cd0a7c5">&#9670;&nbsp;</a></span>wait()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classseastar_1_1future.html">future</a>&lt;std::vector&lt;<a class="el" href="classseastar_1_1experimental_1_1fsnotifier.html#structseastar_1_1experimental_1_1fsnotifier_1_1event">event</a>&gt; &gt; seastar::experimental::fsnotifier::wait </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Wait for events.</p>
<dl class="section return"><dt>Returns</dt><dd>a future that becomes ready when registered events occur. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>seastar/core/<a class="el" href="fsnotify_8hh_source.html">fsnotify.hh</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
