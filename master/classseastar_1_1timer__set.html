<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Seastar: seastar::timer_set&lt; Timer, link &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Seastar
   </div>
   <div id="projectbrief">High performance C++ framework for concurrent servers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceseastar.html">seastar</a></li><li class="navelem"><a class="el" href="classseastar_1_1timer__set.html">timer_set</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classseastar_1_1timer__set-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">seastar::timer_set&lt; Timer, link &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename Timer, boost::intrusive::list_member_hook&lt;&gt; Timer::* link&gt;<br />
class seastar::timer_set&lt; Timer, link &gt;</h3>

<p>A data structure designed for holding and expiring timers. It's optimized for timer non-delivery by deferring sorting cost until expiry time. The optimization is based on the observation that in many workloads timers are cancelled or rescheduled before they expire. That's especially the case for TCP timers.</p>
<p>The template type "Timer" should have a method named get_timeout() which returns Timer::time_point which denotes timer's expiration. </p>
</div>
<p><code>#include &lt;<a class="el" href="timer-set_8hh_source.html">seastar/core/timer-set.hh</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a1eeca3504c69dfd1ef775e26c4321d28"><td class="memItemLeft" align="right" valign="top"><a id="a1eeca3504c69dfd1ef775e26c4321d28"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>time_point</b> = typename Timer::time_point</td></tr>
<tr class="separator:a1eeca3504c69dfd1ef775e26c4321d28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54e7fb0580455ea140acc12e5330ce52"><td class="memItemLeft" align="right" valign="top"><a id="a54e7fb0580455ea140acc12e5330ce52"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>timer_list_t</b> = boost::intrusive::list&lt; Timer, boost::intrusive::member_hook&lt; Timer, boost::intrusive::list_member_hook&lt;&gt;, link &gt; &gt;</td></tr>
<tr class="separator:a54e7fb0580455ea140acc12e5330ce52"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a109e6dc2889a72715906a38acd618099"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classseastar_1_1timer__set.html#a109e6dc2889a72715906a38acd618099">insert</a> (Timer &amp;<a class="el" href="classseastar_1_1timer.html">timer</a>) noexcept</td></tr>
<tr class="separator:a109e6dc2889a72715906a38acd618099"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae636fa4ffb373ccea23566646caeeadd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classseastar_1_1timer__set.html#ae636fa4ffb373ccea23566646caeeadd">remove</a> (Timer &amp;<a class="el" href="classseastar_1_1timer.html">timer</a>) noexcept</td></tr>
<tr class="separator:ae636fa4ffb373ccea23566646caeeadd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2ca3a4973d95ea21af136abe84e20c0"><td class="memItemLeft" align="right" valign="top">timer_list_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classseastar_1_1timer__set.html#ae2ca3a4973d95ea21af136abe84e20c0">expire</a> (time_point now) noexcept</td></tr>
<tr class="separator:ae2ca3a4973d95ea21af136abe84e20c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bb87553e4462729c5832d67fcc2a19e"><td class="memItemLeft" align="right" valign="top">time_point&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classseastar_1_1timer__set.html#a6bb87553e4462729c5832d67fcc2a19e">get_next_timeout</a> () const noexcept</td></tr>
<tr class="separator:a6bb87553e4462729c5832d67fcc2a19e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a231e015a47e9c03e367c5d920c145aad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classseastar_1_1timer__set.html#a231e015a47e9c03e367c5d920c145aad">clear</a> () noexcept</td></tr>
<tr class="separator:a231e015a47e9c03e367c5d920c145aad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5ea3fcf27991e13962c33c364263377"><td class="memItemLeft" align="right" valign="top"><a id="ad5ea3fcf27991e13962c33c364263377"></a>
size_t&#160;</td><td class="memItemRight" valign="bottom"><b>size</b> () const noexcept</td></tr>
<tr class="separator:ad5ea3fcf27991e13962c33c364263377"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae84405da6e95e7e50f9f0af33a28443d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classseastar_1_1timer__set.html#ae84405da6e95e7e50f9f0af33a28443d">empty</a> () const noexcept</td></tr>
<tr class="separator:ae84405da6e95e7e50f9f0af33a28443d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a295cfbc219887ee092692d40d8f4325b"><td class="memItemLeft" align="right" valign="top"><a id="a295cfbc219887ee092692d40d8f4325b"></a>
time_point&#160;</td><td class="memItemRight" valign="bottom"><b>now</b> () noexcept</td></tr>
<tr class="separator:a295cfbc219887ee092692d40d8f4325b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a231e015a47e9c03e367c5d920c145aad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a231e015a47e9c03e367c5d920c145aad">&#9670;&nbsp;</a></span>clear()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Timer , boost::intrusive::list_member_hook&lt;&gt; Timer::* link&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classseastar_1_1timer__set.html">seastar::timer_set</a>&lt; Timer, link &gt;::clear </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Clears both active and expired timer sets. </p>

</div>
</div>
<a id="ae84405da6e95e7e50f9f0af33a28443d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae84405da6e95e7e50f9f0af33a28443d">&#9670;&nbsp;</a></span>empty()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Timer , boost::intrusive::list_member_hook&lt;&gt; Timer::* link&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classseastar_1_1timer__set.html">seastar::timer_set</a>&lt; Timer, link &gt;::empty </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns true if and only if there are no timers in the active set. </p>

</div>
</div>
<a id="ae2ca3a4973d95ea21af136abe84e20c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2ca3a4973d95ea21af136abe84e20c0">&#9670;&nbsp;</a></span>expire()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Timer , boost::intrusive::list_member_hook&lt;&gt; Timer::* link&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">timer_list_t <a class="el" href="classseastar_1_1timer__set.html">seastar::timer_set</a>&lt; Timer, link &gt;::expire </td>
          <td>(</td>
          <td class="paramtype">time_point&#160;</td>
          <td class="paramname"><em>now</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Expires active timers.</p>
<p>The time points passed to this function must be monotonically increasing. Use <a class="el" href="classseastar_1_1timer__set.html#a6bb87553e4462729c5832d67fcc2a19e">get_next_timeout()</a> to query for the next time point.</p>
<p>Preconditions:</p><ul>
<li>the time_point passed to this function must not be lesser than the previous one passed to this function.</li>
</ul>
<p>Postconditons:</p><ul>
<li>all timers from the active set with Timer::get_timeout() &lt;= now are moved to the expired set. </li>
</ul>

</div>
</div>
<a id="a6bb87553e4462729c5832d67fcc2a19e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bb87553e4462729c5832d67fcc2a19e">&#9670;&nbsp;</a></span>get_next_timeout()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Timer , boost::intrusive::list_member_hook&lt;&gt; Timer::* link&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">time_point <a class="el" href="classseastar_1_1timer__set.html">seastar::timer_set</a>&lt; Timer, link &gt;::get_next_timeout </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns a time point at which <a class="el" href="classseastar_1_1timer__set.html#ae2ca3a4973d95ea21af136abe84e20c0">expire()</a> should be called in order to ensure timers are expired in a timely manner.</p>
<p>Returned values are monotonically increasing. </p>

</div>
</div>
<a id="a109e6dc2889a72715906a38acd618099"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a109e6dc2889a72715906a38acd618099">&#9670;&nbsp;</a></span>insert()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Timer , boost::intrusive::list_member_hook&lt;&gt; Timer::* link&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classseastar_1_1timer__set.html">seastar::timer_set</a>&lt; Timer, link &gt;::insert </td>
          <td>(</td>
          <td class="paramtype">Timer &amp;&#160;</td>
          <td class="paramname"><em>timer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Adds timer to the active set.</p>
<p>The value returned by <a class="el" href="classseastar_1_1timer.html#a023b75691ff4ed583bc03fe49e166637">timer.get_timeout()</a> is used as timer's expiry. The result of <a class="el" href="classseastar_1_1timer.html#a023b75691ff4ed583bc03fe49e166637">timer.get_timeout()</a> must not change while the timer is in the active set.</p>
<p>Preconditions:</p><ul>
<li>this timer must not be currently in the active set or in the expired set.</li>
</ul>
<p>Postconditions:</p><ul>
<li>this timer will be added to the active set until it is expired by a call to <a class="el" href="classseastar_1_1timer__set.html#ae2ca3a4973d95ea21af136abe84e20c0">expire()</a> or removed by a call to <a class="el" href="classseastar_1_1timer__set.html#ae636fa4ffb373ccea23566646caeeadd">remove()</a>.</li>
</ul>
<p>Returns true if and only if this timer's timeout is less than <a class="el" href="classseastar_1_1timer__set.html#a6bb87553e4462729c5832d67fcc2a19e">get_next_timeout()</a>. When this function returns true the caller should reschedule <a class="el" href="classseastar_1_1timer__set.html#ae2ca3a4973d95ea21af136abe84e20c0">expire()</a> to be called at <a class="el" href="classseastar_1_1timer.html#a023b75691ff4ed583bc03fe49e166637">timer.get_timeout()</a> to ensure timers are expired in a timely manner. </p>

</div>
</div>
<a id="ae636fa4ffb373ccea23566646caeeadd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae636fa4ffb373ccea23566646caeeadd">&#9670;&nbsp;</a></span>remove()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Timer , boost::intrusive::list_member_hook&lt;&gt; Timer::* link&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classseastar_1_1timer__set.html">seastar::timer_set</a>&lt; Timer, link &gt;::remove </td>
          <td>(</td>
          <td class="paramtype">Timer &amp;&#160;</td>
          <td class="paramname"><em>timer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Removes timer from the active set.</p>
<p>Preconditions:</p><ul>
<li>timer must be currently in the active set. Note: it must not be in the expired set.</li>
</ul>
<p>Postconditions:</p><ul>
<li>timer is no longer in the active set.</li>
<li>this object will no longer hold any references to this timer. </li>
</ul>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>seastar/core/<a class="el" href="timer-set_8hh_source.html">timer-set.hh</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
