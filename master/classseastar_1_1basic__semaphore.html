<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Seastar: seastar::basic_semaphore&lt; ExceptionFactory, Clock &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Seastar
   </div>
   <div id="projectbrief">High performance C++ framework for concurrent servers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceseastar.html">seastar</a></li><li class="navelem"><a class="el" href="classseastar_1_1basic__semaphore.html">basic_semaphore</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classseastar_1_1basic__semaphore-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">seastar::basic_semaphore&lt; ExceptionFactory, Clock &gt; Class Template Reference<div class="ingroups"><a class="el" href="group__fiber-module.html">Fibers</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename ExceptionFactory, typename Clock = typename timer&lt;&gt;::clock&gt;<br />
class seastar::basic_semaphore&lt; ExceptionFactory, Clock &gt;</h3>

<p>Counted resource guard. </p>
<p>This is a standard computer science semaphore, adapted for futures. You can deposit units into a counter, or take them away. Taking units from the counter may wait if not enough units are available.</p>
<p>To support exceptional conditions, a <a class="el" href="classseastar_1_1basic__semaphore.html#af627627cf8b0aa84441c4c6d0013cc53">broken()</a> method is provided, which causes all current waiters to stop waiting, with an exceptional future returned. This allows causing all fibers that are blocked on a semaphore to continue. This is similar to POSIX's <code>pthread_cancel()</code>, with <a class="el" href="classseastar_1_1basic__semaphore.html#a30f599e383c15e039406500af0629083">wait()</a> acting as a cancellation point.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">ExceptionFactory</td><td>template parameter allows modifying a semaphore to throw customized exceptions on timeout/broken/aborted. It has to provide three functions: ExceptionFactory::timeout() - that returns a <a class="el" href="classseastar_1_1semaphore__timed__out.html">semaphore_timed_out</a> exception by default, ExceptionFactory::broken() - that returns a <a class="el" href="classseastar_1_1broken__semaphore.html">broken_semaphore</a> exception by default, and ExceptionFactory::aborted() - that returns a <a class="el" href="classseastar_1_1semaphore__aborted.html">semaphore_aborted</a> exception by default. </td></tr>
  </table>
  </dd>
</dl>
</div>
<p><code>#include &lt;<a class="el" href="semaphore_8hh_source.html">seastar/core/semaphore.hh</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for seastar::basic_semaphore&lt; ExceptionFactory, Clock &gt;:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classseastar_1_1basic__semaphore.png" alt=""/>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a0cf15f9ca6e0aad41c9d364fc29b02be"><td class="memItemLeft" align="right" valign="top"><a id="a0cf15f9ca6e0aad41c9d364fc29b02be"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>duration</b> = typename <a class="el" href="classseastar_1_1timer.html">timer</a>&lt; Clock &gt;::duration</td></tr>
<tr class="separator:a0cf15f9ca6e0aad41c9d364fc29b02be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c116829dde8f0b70eb694a383e3bfb3"><td class="memItemLeft" align="right" valign="top"><a id="a0c116829dde8f0b70eb694a383e3bfb3"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>clock</b> = typename <a class="el" href="classseastar_1_1timer.html">timer</a>&lt; Clock &gt;::clock</td></tr>
<tr class="separator:a0c116829dde8f0b70eb694a383e3bfb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a599868cf15f9b6d9ba05d144a5299b5e"><td class="memItemLeft" align="right" valign="top"><a id="a599868cf15f9b6d9ba05d144a5299b5e"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>time_point</b> = typename <a class="el" href="classseastar_1_1timer.html">timer</a>&lt; Clock &gt;::time_point</td></tr>
<tr class="separator:a599868cf15f9b6d9ba05d144a5299b5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73e1ce8453dfeaf1b5b06c5d5d01b1ba"><td class="memItemLeft" align="right" valign="top"><a id="a73e1ce8453dfeaf1b5b06c5d5d01b1ba"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>exception_factory</b> = ExceptionFactory</td></tr>
<tr class="separator:a73e1ce8453dfeaf1b5b06c5d5d01b1ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a023e3a8263ea2cd93a26987265ddee2e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classseastar_1_1basic__semaphore.html#a023e3a8263ea2cd93a26987265ddee2e">basic_semaphore</a> (size_t count) noexcept(std::is_nothrow_default_constructible_v&lt; exception_factory &gt;)</td></tr>
<tr class="separator:a023e3a8263ea2cd93a26987265ddee2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60a7e1cf340a2d37054428f4a49a8593"><td class="memItemLeft" align="right" valign="top"><a id="a60a7e1cf340a2d37054428f4a49a8593"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>basic_semaphore</b> (size_t count, exception_factory &amp;&amp;factory) noexcept(std::is_nothrow_move_constructible_v&lt; exception_factory &gt;)</td></tr>
<tr class="separator:a60a7e1cf340a2d37054428f4a49a8593"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad47068098c0bd426c9eb51ce7dafd2b6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classseastar_1_1basic__semaphore.html#ad47068098c0bd426c9eb51ce7dafd2b6">basic_semaphore</a> (<a class="el" href="classseastar_1_1basic__semaphore.html">basic_semaphore</a> &amp;&amp;other) noexcept(std::is_nothrow_move_constructible_v&lt; exception_factory &gt;)</td></tr>
<tr class="separator:ad47068098c0bd426c9eb51ce7dafd2b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4c12194dfc8482d6f92ace11adef8a0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classseastar_1_1basic__semaphore.html">basic_semaphore</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classseastar_1_1basic__semaphore.html#ac4c12194dfc8482d6f92ace11adef8a0">operator=</a> (<a class="el" href="classseastar_1_1basic__semaphore.html">basic_semaphore</a> &amp;&amp;other) noexcept(std::is_nothrow_move_assignable_v&lt; exception_factory &gt;)</td></tr>
<tr class="separator:ac4c12194dfc8482d6f92ace11adef8a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30f599e383c15e039406500af0629083"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classseastar_1_1future.html">future</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classseastar_1_1basic__semaphore.html#a30f599e383c15e039406500af0629083">wait</a> (size_t nr=1) noexcept</td></tr>
<tr class="separator:a30f599e383c15e039406500af0629083"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a599504c4cbf82ecbd44c7bee64682474"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classseastar_1_1future.html">future</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classseastar_1_1basic__semaphore.html#a599504c4cbf82ecbd44c7bee64682474">wait</a> (time_point timeout, size_t nr=1) noexcept</td></tr>
<tr class="separator:a599504c4cbf82ecbd44c7bee64682474"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07b4a958ebb11295203db8fda96a4a05"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classseastar_1_1future.html">future</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classseastar_1_1basic__semaphore.html#a07b4a958ebb11295203db8fda96a4a05">wait</a> (<a class="el" href="classseastar_1_1abort__source.html">abort_source</a> &amp;as, size_t nr=1) noexcept</td></tr>
<tr class="separator:a07b4a958ebb11295203db8fda96a4a05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73a29789c136c0ccc3a69517a91ff9f7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classseastar_1_1future.html">future</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classseastar_1_1basic__semaphore.html#a73a29789c136c0ccc3a69517a91ff9f7">wait</a> (duration timeout, size_t nr=1) noexcept</td></tr>
<tr class="separator:a73a29789c136c0ccc3a69517a91ff9f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab85ecffff17b565abfa46c3fda090c93"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classseastar_1_1basic__semaphore.html#ab85ecffff17b565abfa46c3fda090c93">signal</a> (size_t nr=1) noexcept</td></tr>
<tr class="separator:ab85ecffff17b565abfa46c3fda090c93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87eb1328a16be3c9982705147df78c8f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classseastar_1_1basic__semaphore.html#a87eb1328a16be3c9982705147df78c8f">consume</a> (size_t nr=1) noexcept</td></tr>
<tr class="memdesc:a87eb1328a16be3c9982705147df78c8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Consume the specific number of units without blocking.  <a href="classseastar_1_1basic__semaphore.html#a87eb1328a16be3c9982705147df78c8f">More...</a><br /></td></tr>
<tr class="separator:a87eb1328a16be3c9982705147df78c8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaac157ad64df05d0681372fcd83f0c8c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classseastar_1_1basic__semaphore.html#aaac157ad64df05d0681372fcd83f0c8c">try_wait</a> (size_t nr=1) noexcept</td></tr>
<tr class="separator:aaac157ad64df05d0681372fcd83f0c8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13fcf380b0130ebf5338042b6340f27c"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classseastar_1_1basic__semaphore.html#a13fcf380b0130ebf5338042b6340f27c">current</a> () const noexcept</td></tr>
<tr class="separator:a13fcf380b0130ebf5338042b6340f27c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9339868a571ea48671f8964130985a33"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classseastar_1_1basic__semaphore.html#a9339868a571ea48671f8964130985a33">available_units</a> () const noexcept</td></tr>
<tr class="separator:a9339868a571ea48671f8964130985a33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94b2090cfe27436309531d42ee0d2663"><td class="memItemLeft" align="right" valign="top"><a id="a94b2090cfe27436309531d42ee0d2663"></a>
size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classseastar_1_1basic__semaphore.html#a94b2090cfe27436309531d42ee0d2663">waiters</a> () const noexcept</td></tr>
<tr class="memdesc:a94b2090cfe27436309531d42ee0d2663"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current number of waiters. <br /></td></tr>
<tr class="separator:a94b2090cfe27436309531d42ee0d2663"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af627627cf8b0aa84441c4c6d0013cc53"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classseastar_1_1basic__semaphore.html#af627627cf8b0aa84441c4c6d0013cc53">broken</a> () noexcept</td></tr>
<tr class="separator:af627627cf8b0aa84441c4c6d0013cc53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac246eb13e4304f74fe3bb13ada754a91"><td class="memTemplParams" colspan="2">template&lt;typename Exception &gt; </td></tr>
<tr class="memitem:ac246eb13e4304f74fe3bb13ada754a91"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classseastar_1_1basic__semaphore.html#ac246eb13e4304f74fe3bb13ada754a91">broken</a> (const Exception &amp;ex) noexcept</td></tr>
<tr class="separator:ac246eb13e4304f74fe3bb13ada754a91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8926bf4790fb7886e18ee5987018d555"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fiber-module.html#ga8926bf4790fb7886e18ee5987018d555">broken</a> (std::exception_ptr ex) noexcept</td></tr>
<tr class="separator:ga8926bf4790fb7886e18ee5987018d555"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a7f9ea75bb8b77550636401d8e91bde"><td class="memItemLeft" align="right" valign="top"><a id="a4a7f9ea75bb8b77550636401d8e91bde"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classseastar_1_1basic__semaphore.html#a4a7f9ea75bb8b77550636401d8e91bde">ensure_space_for_waiters</a> (size_t n)</td></tr>
<tr class="memdesc:a4a7f9ea75bb8b77550636401d8e91bde"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reserve memory for waiters so that <a class="el" href="classseastar_1_1basic__semaphore.html#a30f599e383c15e039406500af0629083">wait()</a> will not throw. <br /></td></tr>
<tr class="separator:a4a7f9ea75bb8b77550636401d8e91bde"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a0c27f5be57cacf4e4b81ca4a17f8db49"><td class="memItemLeft" align="right" valign="top"><a id="a0c27f5be57cacf4e4b81ca4a17f8db49"></a>
static constexpr size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classseastar_1_1basic__semaphore.html#a0c27f5be57cacf4e4b81ca4a17f8db49">max_counter</a> () noexcept</td></tr>
<tr class="memdesc:a0c27f5be57cacf4e4b81ca4a17f8db49"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the maximum number of units the semaphore counter can hold. <br /></td></tr>
<tr class="separator:a0c27f5be57cacf4e4b81ca4a17f8db49"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a023e3a8263ea2cd93a26987265ddee2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a023e3a8263ea2cd93a26987265ddee2e">&#9670;&nbsp;</a></span>basic_semaphore() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ExceptionFactory , typename Clock  = typename timer&lt;&gt;::clock&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classseastar_1_1basic__semaphore.html">seastar::basic_semaphore</a>&lt; ExceptionFactory, Clock &gt;::<a class="el" href="classseastar_1_1basic__semaphore.html">basic_semaphore</a> </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>count</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Constructs a semaphore object with a specific number of units in its internal counter. E.g., starting it at 1 is suitable for use as an unlocked mutex.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">count</td><td>number of initial units present in the counter. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad47068098c0bd426c9eb51ce7dafd2b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad47068098c0bd426c9eb51ce7dafd2b6">&#9670;&nbsp;</a></span>basic_semaphore() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ExceptionFactory , typename Clock  = typename timer&lt;&gt;::clock&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classseastar_1_1basic__semaphore.html">seastar::basic_semaphore</a>&lt; ExceptionFactory, Clock &gt;::<a class="el" href="classseastar_1_1basic__semaphore.html">basic_semaphore</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classseastar_1_1basic__semaphore.html">basic_semaphore</a>&lt; ExceptionFactory, Clock &gt; &amp;&amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Move-constructs a semaphore object from a moved-from semaphore object, inheriting the number of units from the moved-from semaphore. The moved-from semaphore must be unused.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">other</td><td>the moved-from semaphore object. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a9339868a571ea48671f8964130985a33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9339868a571ea48671f8964130985a33">&#9670;&nbsp;</a></span>available_units()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ExceptionFactory , typename Clock  = typename timer&lt;&gt;::clock&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t <a class="el" href="classseastar_1_1basic__semaphore.html">seastar::basic_semaphore</a>&lt; ExceptionFactory, Clock &gt;::available_units </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the number of available units.</p>
<p>Takes into account units consumed using <a class="el" href="classseastar_1_1basic__semaphore.html#a87eb1328a16be3c9982705147df78c8f">consume()</a> and therefore may return a negative value. </p>

</div>
</div>
<a id="af627627cf8b0aa84441c4c6d0013cc53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af627627cf8b0aa84441c4c6d0013cc53">&#9670;&nbsp;</a></span>broken() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ExceptionFactory , typename Clock  = typename timer&lt;&gt;::clock&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classseastar_1_1basic__semaphore.html">seastar::basic_semaphore</a>&lt; ExceptionFactory, Clock &gt;::broken </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Signal to waiters that an error occurred. <a class="el" href="classseastar_1_1basic__semaphore.html#a30f599e383c15e039406500af0629083">wait()</a> will see an exceptional <a class="el" href="classseastar_1_1future.html">future&lt;&gt;</a> containing a <a class="el" href="classseastar_1_1broken__semaphore.html">broken_semaphore</a> exception. The future is made available immediately. </p>

</div>
</div>
<a id="ac246eb13e4304f74fe3bb13ada754a91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac246eb13e4304f74fe3bb13ada754a91">&#9670;&nbsp;</a></span>broken() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ExceptionFactory , typename Clock  = typename timer&lt;&gt;::clock&gt; </div>
<div class="memtemplate">
template&lt;typename Exception &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classseastar_1_1basic__semaphore.html">seastar::basic_semaphore</a>&lt; ExceptionFactory, Clock &gt;::broken </td>
          <td>(</td>
          <td class="paramtype">const Exception &amp;&#160;</td>
          <td class="paramname"><em>ex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Signal to waiters that an error occurred. <a class="el" href="classseastar_1_1basic__semaphore.html#a30f599e383c15e039406500af0629083">wait()</a> will see an exceptional <a class="el" href="classseastar_1_1future.html">future&lt;&gt;</a> containing the provided exception parameter. The future is made available immediately. </p>

</div>
</div>
<a id="a87eb1328a16be3c9982705147df78c8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87eb1328a16be3c9982705147df78c8f">&#9670;&nbsp;</a></span>consume()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ExceptionFactory , typename Clock  = typename timer&lt;&gt;::clock&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classseastar_1_1basic__semaphore.html">seastar::basic_semaphore</a>&lt; ExceptionFactory, Clock &gt;::consume </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nr</em> = <code>1</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Consume the specific number of units without blocking. </p>
<p>Consume the specific number of units now, regardless of how many units are available in the counter, and reduces the counter by that amount of units. This operation may cause the counter to go negative.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">nr</td><td>Amount of units to consume (default 1). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a13fcf380b0130ebf5338042b6340f27c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13fcf380b0130ebf5338042b6340f27c">&#9670;&nbsp;</a></span>current()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ExceptionFactory , typename Clock  = typename timer&lt;&gt;::clock&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t <a class="el" href="classseastar_1_1basic__semaphore.html">seastar::basic_semaphore</a>&lt; ExceptionFactory, Clock &gt;::current </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the number of units available in the counter.</p>
<p>Does not take into account any waiters. </p>

</div>
</div>
<a id="ac4c12194dfc8482d6f92ace11adef8a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4c12194dfc8482d6f92ace11adef8a0">&#9670;&nbsp;</a></span>operator=()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ExceptionFactory , typename Clock  = typename timer&lt;&gt;::clock&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classseastar_1_1basic__semaphore.html">basic_semaphore</a>&amp; <a class="el" href="classseastar_1_1basic__semaphore.html">seastar::basic_semaphore</a>&lt; ExceptionFactory, Clock &gt;::operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classseastar_1_1basic__semaphore.html">basic_semaphore</a>&lt; ExceptionFactory, Clock &gt; &amp;&amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Move-assigns a semaphore object from a moved-from semaphore object, inheriting the number of units from the moved-from semaphore. The number of units of the assigned semaphore is overwritten by the the moved-from number of units. Both the moved-to and moved-from semaphores must be unused.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">other</td><td>the moved-from semaphore object. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab85ecffff17b565abfa46c3fda090c93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab85ecffff17b565abfa46c3fda090c93">&#9670;&nbsp;</a></span>signal()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ExceptionFactory , typename Clock  = typename timer&lt;&gt;::clock&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classseastar_1_1basic__semaphore.html">seastar::basic_semaphore</a>&lt; ExceptionFactory, Clock &gt;::signal </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nr</em> = <code>1</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Deposits a specified number of units into the counter.</p>
<p>The counter is incremented by the specified number of units. If the new counter value is sufficient to satisfy the request of one or more waiters, their futures (in FIFO order) become ready, and the value of the counter is reduced according to the amount requested.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">nr</td><td>Number of units to deposit (default 1). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aaac157ad64df05d0681372fcd83f0c8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaac157ad64df05d0681372fcd83f0c8c">&#9670;&nbsp;</a></span>try_wait()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ExceptionFactory , typename Clock  = typename timer&lt;&gt;::clock&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classseastar_1_1basic__semaphore.html">seastar::basic_semaphore</a>&lt; ExceptionFactory, Clock &gt;::try_wait </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nr</em> = <code>1</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Attempts to reduce the counter value by a specified number of units.</p>
<p>If sufficient units are available in the counter, and if no other fiber is waiting, then the counter is reduced. Otherwise, nothing happens. This is useful for "opportunistic" waits where useful work can happen if the counter happens to be ready, but when it is not worthwhile to wait.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">nr</td><td>number of units to reduce the counter by (default 1). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if the counter had sufficient units, and was decremented. </dd></dl>

</div>
</div>
<a id="a07b4a958ebb11295203db8fda96a4a05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07b4a958ebb11295203db8fda96a4a05">&#9670;&nbsp;</a></span>wait() <span class="overload">[1/4]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ExceptionFactory , typename Clock  = typename timer&lt;&gt;::clock&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classseastar_1_1future.html">future</a> <a class="el" href="classseastar_1_1basic__semaphore.html">seastar::basic_semaphore</a>&lt; ExceptionFactory, Clock &gt;::wait </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classseastar_1_1abort__source.html">abort_source</a> &amp;&#160;</td>
          <td class="paramname"><em>as</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nr</em> = <code>1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Waits until at least a specific number of units are available in the counter, and reduces the counter by that amount of units. The request can be aborted using an <a class="el" href="classseastar_1_1abort__source.html">abort_source</a>.</p>
<dl class="section note"><dt>Note</dt><dd>Waits are serviced in FIFO order, though if several are awakened at once, they may be reordered by the scheduler.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">as</td><td>abort source. </td></tr>
    <tr><td class="paramname">nr</td><td>Amount of units to wait for (default 1). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a future that becomes ready when sufficient units are available to satisfy the request. On abort, the future contains a <a class="el" href="classseastar_1_1semaphore__aborted.html">semaphore_aborted</a> exception. If the semaphore was <a class="el" href="classseastar_1_1basic__semaphore.html#af627627cf8b0aa84441c4c6d0013cc53">broken()</a>, may contain a <a class="el" href="classseastar_1_1broken__semaphore.html">broken_semaphore</a> exception. </dd></dl>

</div>
</div>
<a id="a73a29789c136c0ccc3a69517a91ff9f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73a29789c136c0ccc3a69517a91ff9f7">&#9670;&nbsp;</a></span>wait() <span class="overload">[2/4]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ExceptionFactory , typename Clock  = typename timer&lt;&gt;::clock&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classseastar_1_1future.html">future</a> <a class="el" href="classseastar_1_1basic__semaphore.html">seastar::basic_semaphore</a>&lt; ExceptionFactory, Clock &gt;::wait </td>
          <td>(</td>
          <td class="paramtype">duration&#160;</td>
          <td class="paramname"><em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nr</em> = <code>1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Waits until at least a specific number of units are available in the counter, and reduces the counter by that amount of units. If the request cannot be satisfied in time, the request is aborted.</p>
<dl class="section note"><dt>Note</dt><dd>Waits are serviced in FIFO order, though if several are awakened at once, they may be reordered by the scheduler.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timeout</td><td>how long to wait. </td></tr>
    <tr><td class="paramname">nr</td><td>Amount of units to wait for (default 1). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a future that becomes ready when sufficient units are available to satisfy the request. On timeout, the future contains a <a class="el" href="classseastar_1_1semaphore__timed__out.html">semaphore_timed_out</a> exception. If the semaphore was <a class="el" href="classseastar_1_1basic__semaphore.html#af627627cf8b0aa84441c4c6d0013cc53">broken()</a>, may contain a <a class="el" href="classseastar_1_1broken__semaphore.html">broken_semaphore</a> exception. </dd></dl>

</div>
</div>
<a id="a30f599e383c15e039406500af0629083"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30f599e383c15e039406500af0629083">&#9670;&nbsp;</a></span>wait() <span class="overload">[3/4]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ExceptionFactory , typename Clock  = typename timer&lt;&gt;::clock&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classseastar_1_1future.html">future</a> <a class="el" href="classseastar_1_1basic__semaphore.html">seastar::basic_semaphore</a>&lt; ExceptionFactory, Clock &gt;::wait </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nr</em> = <code>1</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Waits until at least a specific number of units are available in the counter, and reduces the counter by that amount of units.</p>
<dl class="section note"><dt>Note</dt><dd>Waits are serviced in FIFO order, though if several are awakened at once, they may be reordered by the scheduler.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">nr</td><td>Amount of units to wait for (default 1). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a future that becomes ready when sufficient units are available to satisfy the request. If the semaphore was <a class="el" href="classseastar_1_1basic__semaphore.html#af627627cf8b0aa84441c4c6d0013cc53">broken()</a>, may contain an exception. </dd></dl>

</div>
</div>
<a id="a599504c4cbf82ecbd44c7bee64682474"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a599504c4cbf82ecbd44c7bee64682474">&#9670;&nbsp;</a></span>wait() <span class="overload">[4/4]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ExceptionFactory , typename Clock  = typename timer&lt;&gt;::clock&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classseastar_1_1future.html">future</a> <a class="el" href="classseastar_1_1basic__semaphore.html">seastar::basic_semaphore</a>&lt; ExceptionFactory, Clock &gt;::wait </td>
          <td>(</td>
          <td class="paramtype">time_point&#160;</td>
          <td class="paramname"><em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nr</em> = <code>1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Waits until at least a specific number of units are available in the counter, and reduces the counter by that amount of units. If the request cannot be satisfied in time, the request is aborted.</p>
<dl class="section note"><dt>Note</dt><dd>Waits are serviced in FIFO order, though if several are awakened at once, they may be reordered by the scheduler.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timeout</td><td>expiration time. </td></tr>
    <tr><td class="paramname">nr</td><td>Amount of units to wait for (default 1). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a future that becomes ready when sufficient units are available to satisfy the request. On timeout, the future contains a <a class="el" href="classseastar_1_1semaphore__timed__out.html">semaphore_timed_out</a> exception. If the semaphore was <a class="el" href="classseastar_1_1basic__semaphore.html#af627627cf8b0aa84441c4c6d0013cc53">broken()</a>, may contain a <a class="el" href="classseastar_1_1broken__semaphore.html">broken_semaphore</a> exception. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>seastar/core/<a class="el" href="semaphore_8hh_source.html">semaphore.hh</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
